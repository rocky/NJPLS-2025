<section>
  <h1>Location inside a container</h1>
  <div align="left">
    <p>In older systems, a position was a line number:

      <pre>
	<code
	  class="hljs ocaml",
	  style="width: 1200px; max-height: 600px;">$ python
Python 3.12.10 (main, Apr 25 2025, 08:59:20) [GCC 13.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> x, y = 1, 0
>>> 6 / x / y
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
ZeroDivisionError: float division by zero
	</code>
      </pre>
    </p>
  </div>
  <aside class="notes">
    <p>
      Historically, a location inside a program was a line number. But
      using line numbers is pretty crude.
    </p>

    <p>
      I recently gave a lecture in a compiler class showing how to
      beef up the course compiler so that it
      tracked positions. In their compiler, programs could only be one
      line long!
    </p>

    <p>
      So saying that there's an error on line one is given no
      information at all.
    </p>

    <p>
      Lest you think this rare. Think about errors in an interactive
      program shell. Here is a session with Python 3.12:
    </p>

    <p>There are two divides on the line. Which divide caused the
    exception in line 1? No clue given here.
    </p>
    <p>
      I am pleased to report that in Python 3.13 this has been
      corrected, <em>somewhat</em>. The granularity is still no less
      than a line. But the traceback error message
      for <em>ZeroDivide</em> has been improved to show the specific
      division that caused the problem.
    </p>

    <p>
      Why it took over 25 years for Python to address something like
      this is sad. And if you try the same thing in Ruby or
      Perl. You'll get something similar to the behavior above: you
      get a line number with no indication <i>where</i> on the line,
      or <i>which</i> divide, the problem lies. Javascript will say
      the computation is Infinity, so no error is raised.
    </p>

    <p>
     Nowadays, the trend in more enlightend compilers is to move to
     the more finer-grained location by giving both line and column
     number (inside a container). This certainly helps in that example
     where one might wonder which of two divides an error is coming
     from.
    </p>

    <p>More useful, though, is to specify a position as a <i>range</i>
    of text from the start to end position. The Jane Street parsing
    library for S-Expressions has this. So let's take a look at this.
      <div style="color: blue; background-color:
		  LightYellow">
	[NEXT] 10.1 ‚ü∂ 11.1
      </div>
    </p>
  </aside>
</section>
